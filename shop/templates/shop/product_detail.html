{% extends 'base.html' %}
{% load widget_tweaks %}
{% block content %}
<head>
    <meta charset="UTF-8">
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<style>
    .my_prod_row_class{
    padding-top:15px;
    padding-bottom:20px;
    }
    .my_prod_row_class .mx-auto p {
    color : #000;
    font-size: 12px;
    }
    .my_prod_row_class .mx-auto p a {
    color: #000;
    font-size: 12px;
    text-decoration: none;
    }
    .my_prod_title{
    font-size: 16;
    text-transform: uppercase;
    letter-spacing: .2em;
    padding-top: 15px;
    padding-bottom: 10px;
    }
    .my_prod_text{
    padding-right: 20px;
    }

</style>
</head>

<div class="container">
    <br>
    <div class="row">

        <div class="col-12 col-sm-12 com-md-12 col-lg-6">
            <div style="min-width: 18rem">
                <img src="{{product.p_url}}"/>
            </div>
            <div  >
                <h1 class="my_prod_title">{{product.p_name}}</h1>
                <p>{{product.price}}원</p>
                <p class="my_title">상품 설명</p>
                <p class="text-justify my_prod_text">{{product.description}}</p>

                <div class = "form-group">
                <form method = "POST" action = "/order/create/">{% csrf_token %}

                <input id="id_quantity" type="int" name="quantity" maxlength="3" />
                    <input type = "{{field.field.widget.input_type}}" class = "form-control" id = "{{field.id_for_label}}"
                            placeholder="{{field.label}}" name = "{{field.name}}"
                            value = "{% ifequal field.name 'product' %} {{product.id}} {% endifequal %}">
                </form>
                </div>
                <a class="btn btn-secondary" href="{% url 'cart:add_cart' product.id %}">장바구니에 담기</a>

            </div>
        </div>
    </div>
    <br><br>
{% if user.is_active %}
<div class="text-right mr-3">
    <a href="{%url 'shop:add_review' pk=product.id %}" class="btn btn-primary btn-sm">
        <i class="fas fa-pencil-alt"></i> 리뷰쓰기</a>
</div>
{% endif %}
<div>
<h1>상품 리뷰</h1>
</div>
<hr>
{% for review in product.review_set.all %}
<h2>{{review.review_title}}</h2>
<br>
<div >
최근 수정한 날짜 : {{review.r_modify_dt}}
</div>
{% if review.rating == 1 %}
<i class="fa fa-star-half text-warning"></i>
{% elif review.rating == 2 %}
<i class="fa fa-star text-warning"></i>
{% elif review.rating == 3 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star-half text-warning"></i>
{% elif review.rating == 4 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
{% elif review.rating == 5 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star-half text-warning"></i>
{% elif review.rating == 6 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
{% elif review.rating == 7 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star-half text-warning"></i>
{% elif review.rating == 8 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
{% elif review.rating == 9 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star-half text-warning"></i>
{% elif review.rating == 10 %}
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
<i class="fa fa-star text-warning"></i>
{% endif %}
<br>
{% for file in review.files.all %}
<img src="{{file.upload_file.url}}">
{% endfor %}


<br>
{{review.content | safe}}
{% if review.author == user %}
{% if user.is_active %}
<a href="{%url 'shop:update_review' pk=review.id %}" class="btn btn-primary btn-sm">리뷰수정</a>

<a href="{%url 'shop:delete_review' pk=review.id %}" class="btn btn-primary btn-sm">리뷰삭제</a>

{% endif %}
{% endif %}
<br>
<hr>
{% endfor %}
    <br>
<h1>상품 문의</h1>
 {% for qna in product.qna_set.all %}
    <a class="mr-3" href="{% url 'shop:update_qna' qna.id %}">
        <i class="far fa-edit"></i> 수정</a>
    <a class="mr-3" href="{% url 'shop:delete_qna' qna.id %}">
        <i class="far fa-edit"></i> 삭제</a>
    <p>{{ qna.qna_title }} {{ qna.qna_modify_date }}</p>
    <p>{{ qna.author }}</p>
    <p>{{ qna | safe }}</p>
    <hr>
    {% endfor %}

{% if user.is_active %}
<div class="text-right mr-3">
    <a href="{%url 'shop:add_qna' product.id %}" class="btn btn-primary btn-sm">
        <i class="fas fa-pencil-alt"></i> 쓰기</a>
</div>
</div>



</div>


{% endif %}

{% endblock %}